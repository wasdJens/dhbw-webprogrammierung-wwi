<main class="create-page">
  <section class="intro">
    <p class="eyebrow">Neuer Eintrag</p>
    <h1>Füge ein neues Bier zu deinem Tagebuch hinzu</h1>
    <p class="lead">
      Trage Name, Marke und Geschmack ein – schon landet dein Fund in der Beer-Tracker-Sammlung.
    </p>
  </section>

  <section class="create-layout">
    <mat-card class="form-card">
      <form [formGroup]="beerForm" (ngSubmit)="submit()" novalidate>
        <div class="form-grid">
          <mat-form-field appearance="outline">
            <mat-label>Name des Bieres</mat-label>
            <input
              matInput
              formControlName="name"
              placeholder="z.B. Hopfenblüte Spezial"
              autocomplete="off"
              />
            @if (beerForm.controls.name.hasError('required')) {
              <mat-error>
                Bitte gib einen Namen ein.
              </mat-error>
            }
            @if (beerForm.controls.name.hasError('maxlength')) {
              <mat-error>
                Maximal 120 Zeichen erlaubt.
              </mat-error>
            }
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Marke / Brauerei</mat-label>
            <input
              matInput
              formControlName="brand"
              placeholder="z.B. Craft Kollektiv"
              autocomplete="off"
              />
            @if (beerForm.controls.brand.hasError('required')) {
              <mat-error>
                Bitte gib eine Marke ein.
              </mat-error>
            }
            @if (beerForm.controls.brand.hasError('maxlength')) {
              <mat-error>
                Maximal 120 Zeichen erlaubt.
              </mat-error>
            }
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Stil / Geschmack</mat-label>
            <mat-select formControlName="taste">
              @for (taste of tasteOptions; track taste) {
                <mat-option [value]="taste">
                  {{ taste }}
                </mat-option>
              }
            </mat-select>
            @if (beerForm.controls.taste.hasError('required')) {
              <mat-error>
                Bitte wähle einen Stil aus.
              </mat-error>
            }
          </mat-form-field>
        </div>

        @if (isSubmitting()) {
          <mat-progress-bar mode="indeterminate"></mat-progress-bar>
        }

        <div class="form-actions">
          <button mat-flat-button color="primary" type="submit" [disabled]="isSubmitting()">
            <mat-icon>save</mat-icon>
            Bier speichern
          </button>
          <button mat-stroked-button color="accent" type="button" routerLink="/beers">
            Abbrechen
          </button>
        </div>

        @if (errorMessage()) {
          <p class="error">{{ errorMessage() }}</p>
        }
      </form>
    </mat-card>

    <mat-card class="helper-card">
      <mat-icon>tips_and_updates</mat-icon>
      <h3>Schnelle Tipps</h3>
      <ul>
        <li>Nutze eindeutige Namen, damit du Biere leichter wiederfindest.</li>
        <li>Der Stil hilft beim Filtern in der Übersicht.</li>
        <li>Nach dem Speichern gelangst du automatisch zurück zur Liste.</li>
      </ul>
      <button mat-button color="primary" routerLink="/beers">
        Zurück zur Übersicht
      </button>
    </mat-card>
  </section>
</main>
